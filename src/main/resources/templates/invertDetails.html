<!DOCTYPE html>
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8"/>
    <title th:text="${invert.getName() + ' Details'}"></title>
    <link th:href="@{/css/invertDetails.css}" rel="stylesheet"/>
    <script type="text/javascript" th:src="@{/js/myInverts.js}"></script>
    <script src="https://kit.fontawesome.com/5788f7a270.js" crossorigin="anonymous"></script>
    <meta th:name="_csrf" th:content="${_csrf.token}"/>
    <meta th:name="_csrf_header" th:content="${_csrf.headerName}"/>
</head>
<body>
    <div class="top_nav">
        <a class="link_left" href="/">Home</a>
        <a class="link_left" href="/myInverts">My Inverts</a>
        <a class="link_right" href="/logout">Logout</a>
        <a class="link_right" href="/profile">Profile</a>
    </div>
    <div class="wrap">
        <div class="content">
            <div class="main">
                <div>
                    <label for="name">Name: </label>
                    <span id="name" th:text="${invert.getName()}"></span>
                </div>
                <div th:if="${invert.getPhotos().empty}">
                    <img class="main_photo" src="https://res.cloudinary.com/mmaruszak/image/upload/v1617744509/no-image-icon-23492_y3c5us.png">
                </div>
                <div th:unless="${invert.getPhotos().empty}">
                    <a th:href="${invert.getPhotos()[0].getLink()}">
                        <img class="main_photo" th:src="${invert.getPhotos()[0].getLink()}">
                    </a>
                </div>
                <div>
                    <label for="acquired">Bought: </label>
                    <span id="acquired" th:text="${invert.getAcquired()} ?: 'N/A'"></span>
                </div>
                <div id="buttons">
                    <button id="edit_button" title="Edit" th:onclick="javascript:edit(/*[[${invert.getId()}]]*/)">
                        <i class="fas fa-edit"></i></button>
                    <button id="delete_button" title="Delete" th:onclick="javascript:remove(/*[[${invert.getId()}]]*/)">
                        <i class="fas fa-trash-alt"></i></button>
                    <span th:if="${invert.isAlive()}"><button id="death_button" title="Mark as dead" th:onclick="javascript:markDead(/*[[${invert.getId()}]]*/)">
                        <i class="fas fa-skull"></i></button></span>
                </div>
            </div>
            <div class="details">
                <div>
                    <label for="acquired">Specie: </label>
                    <span id="specie" th:text="${invert.getSpecie().getName()}"></span>
                </div>
                <div>
                    <label for="acquired">Sex: </label>
                    <span id="sex" th:text="${invert.getSex().getName()}"></span>
                </div>
                <div>
                    <label for="acquired">Date of Birth: </label>
                    <span id="birth" th:text="${invert.getBirth()} ?: 'N/A'"></span>
                </div>
                <div th:if="${invert.getDeath() != null}">
                    <label for="death">Date of Death: </label>
                    <span id="death" th:text="${invert.getDeath()}"></span>
                </div>
                <div>
                    <label for="last_instar">Last Instar: </label>
                    <span id="last_instar"
                          th:text="${invert.getInstars()[#lists.size(invert.getInstars())-1].getL()} ?: 'N/A'"></span>
                </div>
                <div>
                    <label for="last_instar_date">Date of Last Instar: </label>
                    <span id="last_instar_date"
                          th:text="${invert.getInstars()[#lists.size(invert.getInstars())-1].getMoltDate()} ?: 'N/A'"></span>
                </div>
                <div id="table">
                    <label for="table">Instars:</label>
                <div>
                    <table class="instars_table">
                        <thead>
                        <tr>
                            <th>L</th>
                            <th>Date</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr th:each = "instar : ${invert.getInstars()}">
                            <td><span th:text="${instar.getL()}"></span></td>
                            <td><span th:text="${instar.getMoltDate()} ?: 'N/A'"></span></td>
                        </tr>
                        </tbody>
                    </table>
                </div>
                </div>

            </div>
        </div>
        <div id="photos">
            <p id="p_gallery">Gallery</p>
            <span th:each="photo : ${invert.getPhotos()}">
                <a th:href="${photo.getLink()}">
                    <img class="photo" th:src="${photo.getLink()}">
                </a>
            </span>
        </div>
    </div>
</body>
</html>